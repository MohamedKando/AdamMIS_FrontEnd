<!-- employee-list.component.html - FIXED VERSION -->
<div class="container-fluid px-4">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-dark mb-0">Employee Management</h2>
    <button class="btn btn-primary" (click)="onNewEmployee()">
      <i class="fas fa-plus"></i> New Employee
    </button>
  </div>

  <!-- Filters -->
  <div class="card mb-4">
    <div class="card-body">
      <div class="row g-3">
        <!-- Search -->
        <div class="col-md-4">
          <label class="form-label">Search</label>
          <input 
            type="text" 
            class="form-control" 
            placeholder="Search by name or employee number..."
            [(ngModel)]="searchTerm"
            (input)="onSearch()">
        </div>

        <!-- Status Filter -->
        <div class="col-md-4">
          <label class="form-label">Status</label>
          <select 
            class="form-select" 
            [(ngModel)]="selectedStatus"
            (change)="onStatusFilterChange()">
            <option *ngFor="let status of statusOptions" [value]="status.value">
              {{ status.label }}
            </option>
          </select>
        </div>

        <!-- Department Filter -->
        <div class="col-md-4">
          <label class="form-label">Department</label>
          <select 
            class="form-select" 
            [(ngModel)]="selectedDepartment"
            (change)="onDepartmentFilterChange()">
            <option value="All">All Departments</option>
            <option *ngFor="let dept of departments" [value]="dept.id">
              {{ dept.name }}
            </option>
          </select>
        </div>
      </div>
    </div>
  </div>

  <!-- Loading -->
  <div *ngIf="isLoading" class="text-center py-5">
    <div class="spinner-border text-primary" role="status">
      <span class="sr-only">Loading...</span>
    </div>
  </div>

  <!-- Employees Table -->
  <div *ngIf="!isLoading" class="card">
    <div class="card-header">
      <h5 class="mb-0">Employees ({{ filteredEmployees.length }})</h5>
    </div>
    <div class="card-body">
      <div *ngIf="filteredEmployees.length === 0" class="text-center py-5">
        <i class="fas fa-users fa-3x text-muted mb-3"></i>
        <h5 class="text-muted">No employees found</h5>
        <p class="text-muted">No employees match your current filters.</p>
      </div>

      <div *ngIf="filteredEmployees.length > 0" class="table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Employee #</th>
              <th>Name (English)</th>
              <th>Name (Arabic)</th>
              <th>Department</th>
              <th>Current Step</th>
              <th>Status</th>
              <th>Created Date</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let employee of filteredEmployees">
              <td>
                <strong>{{ employee.employeeNumber || 'N/A' }}</strong>
              </td>
              <td>{{ employee.nameEnglish || 'N/A' }}</td>
              <td>{{ employee.nameArabic || 'N/A' }}</td>
              <td>{{ employee.departmentName || 'N/A' }}</td>
              <td>
                <span class="badge badge-info">
                  {{ getCurrentStepDisplay(employee.currentStep) }}
                </span>
                <!-- Debug info - remove after fixing -->
                <small class="d-block text-muted mt-1">
                  Raw: {{ employee.currentStep || 'null' }}
                </small>
              </td>
              <td>
                <span class="badge" [ngClass]="getStatusBadgeClass(employee.status)">
                  {{ getStatusDisplay(employee.status) || 'Unknown' }}
                </span>
                <!-- Debug info - remove after fixing -->
                <small class="d-block text-muted mt-1">
                  Raw: {{ employee.status || 'null' }}
                </small>
              </td>
              <td>{{ employee.createdAt | date:'short' }}</td>
              <td>
                <div class="d-flex gap-1">
                  <button 
                    class="btn btn-sm btn-outline-secondary" 
                    (click)="debugEmployee(employee)"
                    title="Debug (Remove later)">
                    <i class="fas fa-bug"></i>
                  </button>
                  <button 
                    class="btn btn-sm btn-outline-primary" 
                    (click)="onViewEmployee(employee)"
                    title="View">
                    <i class="fas fa-eye"></i>
                  </button>
                  <button 
                    class="btn btn-sm btn-primary" 
                    (click)="onEditEmployee(employee)"
                    title="Edit">
                    <i class="fas fa-edit"></i>
                  </button>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>