<!-- Temporary Dashboard Notice -->
<div class="temp-notice">
  <div class="notice-content">
    <div class="notice-icon">🚧</div>
    <div class="notice-text">
      <h3>Temporary Dashboard Preview</h3>
      <p>The complete dashboard experience is currently under development.</p>
    </div>
  </div>
</div>

<!-- Main Stats Grid -->
<div class="stats-grid">
  <!-- Total Users Card -->
  <div class="stat-card primary">
    <div class="stat-header">
      <h3>Total Users</h3>
      <div class="stat-icon">👥</div>
    </div>
    <div class="stat-content">
      <div class="stat-number" *ngIf="!isLoadingUsers">{{ totalUsers }}</div>
      <div class="stat-loading" *ngIf="isLoadingUsers">
        <div class="loading-spinner"></div>
      </div>
      <div class="stat-description">Registered in system</div>
    </div>
  </div>

  <!-- Online Users Card -->
  <div class="stat-card success">
    <div class="stat-header">
      <h3>Online Users</h3>
      <div class="stat-icon">🟢</div>
    </div>
    <div class="stat-content">
      <div class="stat-number" *ngIf="!isLoadingUsers">{{ onlineUsers }}</div>
      <div class="stat-loading" *ngIf="isLoadingUsers">
        <div class="loading-spinner"></div>
      </div>
      <div class="stat-description">Currently active</div>
      <div class="stat-percentage" *ngIf="totalUsers > 0">
        {{ getPercentage(onlineUsers, totalUsers) }}% active
      </div>
    </div>
  </div>

  <!-- Offline Users Card -->
  <div class="stat-card neutral">
    <div class="stat-header">
      <h3>Offline Users</h3>
      <div class="stat-icon">⚪</div>
    </div>
    <div class="stat-content">
      <div class="stat-number" *ngIf="!isLoadingUsers">{{ offlineUsers }}</div>
      <div class="stat-loading" *ngIf="isLoadingUsers">
        <div class="loading-spinner"></div>
      </div>
      <div class="stat-description">Currently inactive</div>
      <div class="stat-percentage" *ngIf="totalUsers > 0">
        {{ getPercentage(offlineUsers, totalUsers) }}% inactive
      </div>
    </div>
  </div>
</div>

<!-- System Navigation Section -->
<div class="system-navigation" *ngIf="availableSystems.length > 0">
  <div class="section-header">
    <h3>System Navigation</h3>
    <div class="system-count">{{ availableSystems.length }} system(s) available</div>
  </div>
  
  <div class="systems-grid">
    <button 
      *ngFor="let system of availableSystems; trackBy: trackBySystemId" 
      class="system-btn"
      [class]="'system-' + system.id"
      [style.--system-color]="system.color"
      (click)="navigateToSystem(system)"
      [title]="system.description + (system.requiresElevatedPermission ? ' (Requires elevated permissions)' : '')"
    >
      <div class="system-icon">{{ system.icon }}</div>
      <div class="system-text">
        <div class="system-title">
          {{ system.name }}
          <span *ngIf="system.requiresElevatedPermission" class="elevated-badge" title="Requires elevated permissions">🔒</span>
        </div>
        <div class="system-desc">{{ system.description }}</div>
        <div class="system-type-badge" [class]="'badge-' + system.type">
          {{ system.type === 'desktop' ? 'Desktop App' : 'Web System' }}
        </div>-
      </div>
      <div class="system-status" [class]="'status-' + (system.enabled ? 'active' : 'inactive')">
        {{ system.enabled ? '●' : '○' }}
      </div>
    </button>
  </div>
</div>

<!-- No Systems Available Message -->
<div class="no-systems-message" *ngIf="availableSystems.length === 0">
  <div class="message-content">
    <div class="message-icon">🔒</div>
    <h3>No Systems Available</h3>
    <p>You don't have permission to access any systems at this time.</p>
    <p>Contact your administrator if you believe this is an error.</p>
  </div>
</div>

<!-- Quick Actions -->
<div class="quick-actions" *ngIf="availableQuickActions.length > 0">
  <div class="section-header">
    <h3>Quick Actions</h3>
    <div class="action-count">{{ availableQuickActions.length }} action(s) available</div>
  </div>
  
  <div class="actions-grid">
    <button 
      *ngFor="let action of availableQuickActions; trackBy: trackByActionId"
      class="action-btn"
      [style.--action-color]="action.color"
      [routerLink]="action.route"
      [queryParams]="action.queryParams"
      [title]="action.description"
    >
      <div class="action-icon">{{ action.icon }}</div>
      <div class="action-text">
        <div class="action-title">{{ action.title }}</div>
       <div class="action-desc">{{ action.description }}</div>
      </div>
    </button>
  </div>
</div>

<!-- No Quick Actions Available Message -->
<div class="no-actions-message" *ngIf="availableQuickActions.length === 0">
  <div class="message-content">
    <div class="message-icon">⚡</div>
    <h3>No Quick Actions Available</h3>
    <p>You don't have permission to access any quick actions at this time.</p>
  </div>
</div>

<!-- User Info Debug Panel (Remove in production) -->
<div class="debug-panel" *ngIf="false"> <!-- Set to true for debugging -->
  <h4>Debug: User Permissions</h4>
  <div class="debug-info">
    <p><strong>User:</strong> {{ authService.getUserName() }}</p>
    <p><strong>Roles:</strong> {{ authService.getUserRoles().join(', ') || 'None' }}</p>
    <p><strong>Permissions:</strong> {{ authService.getUserPermissions().join(', ') || 'None' }}</p>
    <p><strong>Is SuperAdmin:</strong> {{ authService.isSuperAdmin() }}</p>
  </div>
</div>